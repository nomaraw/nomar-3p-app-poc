
<script>https://nomaraw.github.io/nomar-3p-app-poc/dist/amazon-connect-app.umd.js</script>

<script>
  (async () => {
    try {
      // The UMD global is the SDK object itself.
      const SDK = window.AmazonConnectApp;

      if (!SDK || typeof SDK.init !== 'function') {
        throw new Error('SDK not loaded or missing init()');
      }

      // Initialize per AWS guide: onCreate/onDestroy lifecycle
      const { provider } = SDK.init({
        onCreate: (event) => {
          const { appInstanceId } = event?.context || {};
          console.log('App initialized (bridge OK). appInstanceId=', appInstanceId);
        },
        onDestroy: () => {
          console.log('App being destroyed');
        },
      });

      console.log('APP INIT OK', provider);
      // At this point the bridge is establishedâ€”no contact required, no billing.

      // (Optional) If you later use Test Chat, you can wire contact/agent handlers here.

    } catch (err) {
      console.error('APP INIT FAILED', err);
    }
  })();
</script>
